{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Link}from'react-router-dom';import'./assets/css/style.css';import RecentPosts from'./RecentPosts';import Header from'../Home/Header';import Footer from'../Home/Footer';import{useTranslation}from'react-i18next';import{API_BASE}from'../config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Blog2=()=>{const[posts,setPosts]=useState([]);const{t,i18n}=useTranslation();// Newsletter state\nconst[email,setEmail]=useState('');const[submitting,setSubmitting]=useState(false);const[subscribed,setSubscribed]=useState(false);useEffect(()=>{if(subscribed){const timer=setTimeout(()=>setSubscribed(false),3000);return()=>clearTimeout(timer);}},[subscribed]);// Fetch news based on selected language\nconst fetchNews=async()=>{try{const selectedLanguage=localStorage.getItem('selectedLanguage')||'en';const res=await axios.get(\"\".concat(API_BASE,\"/api/news?lang=\").concat(selectedLanguage));setPosts(res.data);}catch(error){console.error('Error fetching news:',error);}};useEffect(()=>{fetchNews();const handleLanguageChange=()=>{i18n.changeLanguage(localStorage.getItem('selectedLanguage')||'en');fetchNews();};window.addEventListener('storage',handleLanguageChange);window.addEventListener('languageChanged',handleLanguageChange);return()=>{window.removeEventListener('storage',handleLanguageChange);window.removeEventListener('languageChanged',handleLanguageChange);};},[]);// Truncate description\nconst truncate=(text,wordLimit)=>{if(!text||typeof text!=='string')return{text:'',isTruncated:false};const words=text.split(' ');const isTruncated=words.length>wordLimit;return{text:words.slice(0,wordLimit).join(' '),isTruncated};};// Newsletter subscribe handler\nconst handleSubscribe=async e=>{e.preventDefault();setSubmitting(true);try{const res=await fetch(\"\".concat(API_BASE,\"/api/newsletter\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})});if(res.ok){setSubscribed(true);setEmail('');}else{const data=await res.json();// Optionally handle error (do nothing for now)\n}}catch(err){// Optionally handle error (do nothing for now)\n}finally{setSubmitting(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{id:\"wwq\",children:/*#__PURE__*/_jsx(\"div\",{className:\"subscribe-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubscribe,className:\"subscribe-form\",children:[subscribed&&/*#__PURE__*/_jsx(\"div\",{style:{color:'green',marginBottom:8,textAlign:'center',fontWeight:500},children:\"Subscribed!\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:t('footer.subscribe_placeholder'),required:true,className:\"subscribe-input\",value:email,onChange:e=>setEmail(e.target.value),disabled:submitting}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"subscribe-button\",disabled:submitting||subscribed,children:subscribed?'Subscribed':submitting?'Subscribing...':t('footer.subscribe_button')})]})})}),/*#__PURE__*/_jsx(\"section\",{id:\"tttt\",className:\"section featured\",\"aria-label\":\"featured post\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"h2 section-title\",children:[t('blog.start'),\" \",/*#__PURE__*/_jsx(\"strong\",{className:\"strong\",children:t('blog.news')})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"has-scrollbar\",children:posts.map((post,index)=>{const{title='Untitled',description='',imageUrl,tags=[],_id}=post;const{text,isTruncated}=truncate(description,6);return/*#__PURE__*/_jsx(\"li\",{className:\"scrollbar-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"blog-card\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"card-banner img-holder\",children:/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:title,className:\"img-cover\",loading:\"lazy\"})}),/*#__PURE__*/_jsx(\"h1\",{id:\"titler\",children:title}),/*#__PURE__*/_jsxs(\"div\",{id:\"tagger\",className:\"card-content\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"card-meta-list\",children:tags.map((tag,i)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"card-tag\",children:tag})},i))}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[text,isTruncated&&'...']}),/*#__PURE__*/_jsxs(Link,{to:\"/news/\".concat(_id),className:\"read-more\",children:[t('blog.readMore'),\" \\u2192\"]})]})]})},index);})})]})}),/*#__PURE__*/_jsx(RecentPosts,{}),/*#__PURE__*/_jsx(Footer,{})]});};export default Blog2;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","RecentPosts","Header","Footer","useTranslation","API_BASE","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Blog2","posts","setPosts","t","i18n","email","setEmail","submitting","setSubmitting","subscribed","setSubscribed","timer","setTimeout","clearTimeout","fetchNews","selectedLanguage","localStorage","getItem","res","get","concat","data","error","console","handleLanguageChange","changeLanguage","window","addEventListener","removeEventListener","truncate","text","wordLimit","isTruncated","words","split","length","slice","join","handleSubscribe","e","preventDefault","fetch","method","headers","body","JSON","stringify","ok","json","err","children","id","className","onSubmit","style","color","marginBottom","textAlign","fontWeight","type","placeholder","required","value","onChange","target","disabled","map","post","index","title","description","imageUrl","tags","_id","src","alt","loading","tag","i","to"],"sources":["/Users/mac/Desktop/data/application/EFrontend/src/Blog2/Blog2.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport './assets/css/style.css';\nimport RecentPosts from './RecentPosts';\nimport Header from '../Home/Header';\nimport Footer from '../Home/Footer';\nimport { useTranslation } from 'react-i18next';\nimport { API_BASE } from '../config';\n\nconst Blog2 = () => {\n  const [posts, setPosts] = useState([]);\n  const { t, i18n } = useTranslation();\n\n  // Newsletter state\n  const [email, setEmail] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const [subscribed, setSubscribed] = useState(false);\n\n  useEffect(() => {\n    if (subscribed) {\n      const timer = setTimeout(() => setSubscribed(false), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [subscribed]);\n\n  // Fetch news based on selected language\n  const fetchNews = async () => {\n    try {\n      const selectedLanguage = localStorage.getItem('selectedLanguage') || 'en';\n      const res = await axios.get(`${API_BASE}/api/news?lang=${selectedLanguage}`);\n      setPosts(res.data);\n    } catch (error) {\n      console.error('Error fetching news:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchNews();\n\n    const handleLanguageChange = () => {\n      i18n.changeLanguage(localStorage.getItem('selectedLanguage') || 'en');\n      fetchNews();\n    };\n\n    window.addEventListener('storage', handleLanguageChange);\n    window.addEventListener('languageChanged', handleLanguageChange);\n\n    return () => {\n      window.removeEventListener('storage', handleLanguageChange);\n      window.removeEventListener('languageChanged', handleLanguageChange);\n    };\n  }, []);\n\n  // Truncate description\n  const truncate = (text, wordLimit) => {\n    if (!text || typeof text !== 'string') return { text: '', isTruncated: false };\n    const words = text.split(' ');\n    const isTruncated = words.length > wordLimit;\n    return { text: words.slice(0, wordLimit).join(' '), isTruncated };\n  };\n\n  // Newsletter subscribe handler\n  const handleSubscribe = async (e) => {\n    e.preventDefault();\n    setSubmitting(true);\n    try {\n      const res = await fetch(`${API_BASE}/api/newsletter`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email }),\n      });\n      if (res.ok) {\n        setSubscribed(true);\n        setEmail('');\n      } else {\n        const data = await res.json();\n        // Optionally handle error (do nothing for now)\n      }\n    } catch (err) {\n      // Optionally handle error (do nothing for now)\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <>\n      <Header />\n\n      {/* Subscribe Section */}\n      <div id=\"wwq\">\n        <div className=\"subscribe-container\">\n          <form onSubmit={handleSubscribe} className=\"subscribe-form\">\n            {subscribed && (\n              <div style={{ color: 'green', marginBottom: 8, textAlign: 'center', fontWeight: 500 }}>\n                Subscribed!\n              </div>\n            )}\n            <input\n              type=\"email\"\n              placeholder={t('footer.subscribe_placeholder')}\n              required\n              className=\"subscribe-input\"\n              value={email}\n              onChange={e => setEmail(e.target.value)}\n              disabled={submitting}\n            />\n            <button type=\"submit\" className=\"subscribe-button\" disabled={submitting || subscribed}>\n              {subscribed ? 'Subscribed' : submitting ? 'Subscribing...' : t('footer.subscribe_button')}\n            </button>\n          </form>\n        </div>\n      </div>\n\n      {/* News Section */}\n      <section id=\"tttt\" className=\"section featured\" aria-label=\"featured post\">\n        <div className=\"container\">\n          <h2 className=\"h2 section-title\">\n            {t('blog.start')} <strong className=\"strong\">{t('blog.news')}</strong>\n          </h2>\n\n          <ul className=\"has-scrollbar\">\n            {posts.map((post, index) => {\n              const { title = 'Untitled', description = '', imageUrl, tags = [], _id } = post;\n              const { text, isTruncated } = truncate(description, 6);\n\n              return (\n                <li key={index} className=\"scrollbar-item\">\n                  <div className=\"blog-card\">\n                    <figure className=\"card-banner img-holder\">\n                      <img\n                        src={imageUrl}\n                        alt={title}\n                        className=\"img-cover\"\n                        loading=\"lazy\"\n                      />\n                    </figure>\n\n                    <h1 id=\"titler\">{title}</h1>\n\n                    <div id=\"tagger\" className=\"card-content\">\n                      <ul className=\"card-meta-list\">\n                        {tags.map((tag, i) => (\n                          <li key={i}><span className=\"card-tag\">{tag}</span></li>\n                        ))}\n                      </ul>\n\n                      <p className=\"card-text\">\n                        {text}{isTruncated && '...'}\n                      </p>\n\n                      <Link to={`/news/${_id}`} className=\"read-more\">\n                        {t('blog.readMore')} â†’\n                      </Link>\n                    </div>\n                  </div>\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n      </section>\n\n      <RecentPosts />\n      <Footer />\n    </>\n  );\n};\n\nexport default Blog2;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}